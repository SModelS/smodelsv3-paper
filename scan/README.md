## Description

This folder holds the code used to create the SLHA files and run the SModelS scan
used to obtain the results for the 2MDM model. It contains the following structure:

* [configParserWrapper.py](./configParserWrapper.py): Auxiliar code for parsing through elements in [parameters file](./scan_parameters_2mdm.ini);
* [getSLHA.py](./getSLHA.py): script to obtain SLHA files with production cross-section without running MG5;
* [Cards](./Cards): Cards for generating events with MadGraph5;
* [runScanMG5.py](./runScanMG5.py): Python script used to obtain the production cross-sections via Monte Carlo simulation;
* [scan_parameters_2MDM.ini](./scan_parameters_2MDM.ini): Parameters file used as input for the MG5 scan;
* [createSLHA.py](./createSLHA.py): Python script for the creation of SLHA files using as input the .lhe files generated by MG5;
* [xsecs_table.pcl](./xsecs_table.pcl): pickle file containing a Pandas DataFrame holding pre-computed cross-sections for the spin-1 and spin-0 production;
* [2mdm_example.slha](./2mdm_example.slha): SLHA file used to define the model (BSM particles and QNUMBERS) when running SModelS;
* [smodels_parameters_2mdm.ini](./smodels_parameters_2mdm.ini): parameter file for running SModelS.
* [extractResults.ipynb](./extractResults.ipynb): Jupyter notebooks used to create a Pandas DataFrame from SLHA files and SModelS output files and save it to a pickle file.

## Creating SLHA files

 To obtain the SLHA files used as SModelS input, one must first compute cross-sections and branching ratios using MadGraph5. This can done running:
```
./runScanMG5.py -p <parameters-file.ini>
```
The MadGraph output (LHE files or banner files) can be converted to SLHA files running [createSLHA.py](./createSLHA.py):
```
./createSLHA.py -f <list of .lhe.gz or banner.txt files>
```

Alternatively, one can create SLHA files using the analytical expressions for the widths and the pre-computed cross-sections stored in [xsecs_table.pcl](./xsecs_table.pcl) running:
```
./getSLHA.py -p scan_parameters_2mdm.ini
```
The parameters used to create the SLHA files are set in [scan_parameters_2mdm.ini](./scan_parameters_2mdm.ini), such as the mediators and dark matter masses, the coupling parameters, as well as the output folder of the SLHA files. The cross-sections are obtained via 1D interpolation, and rescaled for the selected couplings, if necessary.

*The SLHA files used for the paper are stored in the [data/slhaFiles](../data/slhaFiles/) folder.*

## Running SModelS

Finally the SModelS output can be obtained running SModelS v3.0.0 with the created SLHA files as input:
```
runSModelS.py -p smodels_parameters_2mdm.ini -f <slha files folder> -o <smodels output folder>
```

*The SModelS output files used for the paper are stored in the [data/smodelsOutput](../data/smodelsOutput/) folder.*


